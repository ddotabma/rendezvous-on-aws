from dataclasses import dataclass
import json


@dataclass
class Specifications:
    value: int


@dataclass
class RendezvousMessage:
    uuid: str
    model: str
    datetime: str
    rendezvous_time: int
    data: Specifications

    def __post_init__(self):
        self.data = Specifications(**self.data)  # noqa


@dataclass
class Message:
    Message: RendezvousMessage

    def __post_init__(self):
        self.Message = RendezvousMessage(**json.loads(self.Message))  # noqa


@dataclass
class Record:
    messageId: str
    receiptHandle: str
    attributes: dict
    body: Message
    md5OfBody: str
    eventSourceARN: str
    messageAttributes: str
    awsRegion: str
    eventSource: str

    def __post_init__(self):
        self.body = Message(Message=json.loads(self.body)["Message"])  # noqa


@dataclass
class ModelResponse:
    uuid: str
    start_time: float
    duration: float
    time_after_rendezvous: float
    model: str
    results: str  # json dumps
